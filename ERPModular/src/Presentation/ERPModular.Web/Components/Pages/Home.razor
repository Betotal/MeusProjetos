@page "/"
@rendermode InteractiveServer

<PageTitle>ERPModular - Painel de Progresso</PageTitle>

<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="display-3 fw-bold text-gradient">🚀 ERPModular</h1>
        <p class="lead fs-4 text-white-50">Sistema de Gestão Multi-Domínio, Multi-Tenant e Multi-Schema</p>
        <div class="d-flex justify-content-center mt-3">
            <span class="badge bg-success ms-2 px-3 py-2 rounded-pill shadow-sm">✅ Fases 1, 2, 3, 4 e 5 Concluídas</span>
        </div>
    </div>

    <!-- Barra de Progresso Geral -->
    <div class="row mb-5">
        <div class="col-md-10 offset-md-1">
            <div class="progress-container p-4 rounded-4 shadow-lg bg-dark border border-secondary">
                <div class="d-flex justify-content-between mb-2">
                    <span class="text-white fw-bold">Progresso das 16 Fases</span>
                    <span class="text-accent fw-bold">31% Completo (5/16)</span>
                </div>
                <div class="progress bg-secondary" style="height: 12px;">
                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-accent" role="progressbar" style="width: 31%;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">
        <!-- Coluna da Esquerda: Resumo das Fases -->
        <div class="col-lg-8">
            <div class="card bg-dark border-secondary rounded-4 shadow h-100">
                <div class="card-header bg-transparent border-secondary p-4">
                    <h5 class="mb-0 text-white fw-bold"><i class="fas fa-list-check me-2 text-accent"></i>Cronograma Multi-Domínio</h5>
                    <p class="small text-white-50 mt-1 mb-0">Clique nos títulos para ver detalhes de cada fase.</p>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush rounded-bottom-4 overflow-hidden">
                        
                        <!-- INFRAESTRUTURA -->
                        <div class="group-header bg-secondary bg-opacity-10 px-4 py-2 border-bottom border-secondary">
                            <span class="text-accent extra-small fw-bold text-uppercase">Infraestrutura Compartilhada</span>
                        </div>

                        <!-- FASE 1-4 -->
                        <div class="phase-item @(expandedPhases[0] ? "expanded" : "")" @onclick="() => TogglePhase(0)">
                            <div class="list-group-item bg-success bg-opacity-10 border-secondary p-3 clickable">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0 text-white small fw-bold">FASES 1 a 4: FUNDAÇÕES E AUTH</h6>
                                    <span class="badge bg-success extra-small">CONCLUÍDAS ✅</span>
                                </div>
                            </div>
                            <div class="phase-details p-3 bg-dark border-bottom border-secondary">
                                <ul class="small text-white-50 mb-0">
                                    <li>Arquitetura Multi-Tenant / Multi-Schema configurada.</li>
                                    <li>Injeção de Dependência e Projetos Shared implementados.</li>
                                    <li>ASP.NET Identity com suporte a domínios customizados.</li>
                                    <li>Fluxo de convites e provisionamento automatizado.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- FASE 5 -->
                        <div class="phase-item @(expandedPhases[1] ? "expanded" : "")" @onclick="() => TogglePhase(1)">
                            <div class="list-group-item bg-success bg-opacity-10 border-secondary p-3 clickable">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0 text-white small fw-bold">FASE 5: GESTÃO SAAS E LICENÇAS</h6>
                                    <span class="badge bg-success extra-small">CONCLUÍDA ✅</span>
                                </div>
                            </div>
                            <div class="phase-details p-3 bg-dark border-bottom border-secondary">
                                <ul class="small text-white-50 mb-0">
                                    <li>Gestor de Licenças (Status Ativo/Suspenso/ReadOnly).</li>
                                    <li>Central de Auditoria para logs administrativos.</li>
                                    <li>Painel Super-Admin com KPIs de crescimento.</li>
                                    <li>Bloqueio automático de escrita em modo Read-Only.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- FASE 6 -->
                        <div class="phase-item @(expandedPhases[2] ? "expanded" : "")" @onclick="() => TogglePhase(2)">
                            <div class="list-group-item bg-primary bg-opacity-10 border-primary border-start border-4 p-3 clickable">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0 text-white small fw-bold">FASE 6: FINALIZAÇÃO INFRA / SCAFFOLD</h6>
                                    <span class="badge bg-primary pulse extra-small">EM EXECUÇÃO 🔨</span>
                                </div>
                            </div>
                            <div class="phase-details p-3 bg-dark border-bottom border-secondary">
                                <ul class="small text-white-50 mb-0">
                                    <li>Refino de UI/UX Premium e Menu Mobile Dinâmico.</li>
                                    <li>Padronização de Interatividade (Ilhas de Interatividade).</li>
                                    <li>Blindagem final de autenticação (Cookie vs SignalR).</li>
                                    <li>Gerador de Código (Scaffolding) para novos domínios.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- DOMÍNIO CONFECÇÃO -->
                        <div class="group-header bg-secondary bg-opacity-10 px-4 py-2 border-bottom border-secondary mt-2">
                            <span class="text-info extra-small fw-bold text-uppercase">Domínio: Confecção</span>
                        </div>
                        <div class="phase-item @(expandedPhases[3] ? "expanded" : "")" @onclick="() => TogglePhase(3)">
                            <div class="list-group-item bg-dark border-secondary p-4 clickable opacity-75">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="mb-0 text-white-50 fw-bold">FASES 7 a 13: CORE CONFECÇÃO</h6>
                                    <span class="badge bg-secondary extra-small">AGUARDANDO</span>
                                </div>
                                <small class="text-muted">Estoque, Produção, PDV, Reserva Online e Compras.</small>
                            </div>
                            <div class="phase-details p-3 bg-dark border-bottom border-secondary">
                                <p class="small text-muted mb-0">Módulos específicos para fomento da indústria têxtil, incluindo controle de facções e rastreabilidade de lotes.</p>
                            </div>
                        </div>

                        <!-- DOMÍNIO SALÃO DE BELEZA -->
                        <div class="group-header bg-secondary bg-opacity-10 px-4 py-2 border-bottom border-secondary mt-2">
                            <span class="text-warning extra-small fw-bold text-uppercase">Domínio: Salão de Beleza</span>
                        </div>
                        <div class="phase-item @(expandedPhases[4] ? "expanded" : "")" @onclick="() => TogglePhase(4)">
                            <div class="list-group-item bg-dark border-secondary p-4 clickable opacity-75">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h6 class="mb-0 text-white-50 fw-bold">FASES 14 a 16: CORE SALÃO</h6>
                                    <span class="badge bg-secondary extra-small">AGUARDANDO</span>
                                </div>
                                <small class="text-muted">Agenda, Financeiro, Comissões e Agendamento Online.</small>
                            </div>
                            <div class="phase-details p-3 bg-dark border-bottom border-secondary">
                                <p class="small text-muted mb-0">Módulos voltados para prestação de serviços, com foco em agenda multi-profissional e fidelização de clientes.</p>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!-- Coluna da Direita: Tecnologias e Blindagem -->
        <div class="col-lg-4">
            <div class="card bg-dark border-secondary rounded-4 shadow mb-4">
                <div class="card-header bg-transparent border-secondary p-4">
                    <h5 class="mb-0 text-white fw-bold"><i class="fas fa-shield-halved me-2 text-accent"></i>Blindagem de Dados</h5>
                </div>
                <div class="card-body">
                    <div class="mb-4">
                        <label class="text-accent small fw-bold text-uppercase d-block mb-1">Isolamento Multi-Schema</label>
                        <p class="small text-white-50 mb-0">Cada Domínio (Confecção, Farmácia) possui seu próprio Schema SQL (Ex: <code>domain_confecao.Produtos</code>).</p>
                    </div>
                    <div class="mb-4">
                        <label class="text-accent small fw-bold text-uppercase d-block mb-1">Isolamento Multi-Tenant</label>
                        <p class="small text-white-50 mb-0">Filtros Globais de consulta impedem que o Tenant A veja dados do Tenant B dentro do mesmo Schema.</p>
                    </div>
                    <div>
                        <label class="text-accent small fw-bold text-uppercase d-block mb-1">Auditoria Nativa</label>
                        <p class="small text-white-50 mb-0">Campos de rastreabilidade preenchidos automaticamente via Interceptors.</p>
                    </div>
                </div>
            </div>

            <div class="card bg-dark border-secondary rounded-4 shadow">
                <div class="card-header bg-transparent border-secondary p-4">
                    <h5 class="mb-0 text-white fw-bold"><i class="fas fa-microchip me-2 text-accent"></i>Tech Stack</h5>
                </div>
                <div class="card-body">
                    <div class="badge bg-secondary mb-2 p-2 w-100 text-start">.NET 9 + Blazor Server</div>
                    <div class="badge bg-secondary mb-2 p-2 w-100 text-start">Entity Framework Core 9</div>
                    <div class="badge bg-secondary mb-2 p-2 w-100 text-start">PostgreSQL 17</div>
                    <div class="badge bg-secondary p-2 w-100 text-start">Bootstrap 5 + FontAwesome</div>
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private bool[] expandedPhases = new bool[5];

    private void TogglePhase(int index)
    {
        expandedPhases[index] = !expandedPhases[index];
    }
}
<style>
    .text-gradient {
        background: linear-gradient(135deg, #fff 0%, #38bdf8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .text-accent { color: #38bdf8 !important; }
    .bg-accent { background-color: #38bdf8 !important; }
    .border-primary { border-color: #38bdf8 !important; }
    
    .pulse {
        animation: pulse-animation 2s infinite;
    }

    @@keyframes pulse-animation {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
    }

    .list-group-item {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    }
    
    .list-group-item:last-child {
        border-bottom: none !important;
    }

    .clickable {
        cursor: pointer;
        transition: background 0.2s;
    }
    .clickable:hover {
        background-color: rgba(56, 189, 248, 0.15) !important;
    }

    .phase-details {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out, padding 0.3s ease;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
        opacity: 0;
    }

    .expanded .phase-details {
        max-height: 200px;
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
        opacity: 1;
    }

    .phase-item {
        transition: all 0.3s ease;
    }
</style>

